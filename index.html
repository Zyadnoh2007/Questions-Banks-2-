<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Nursing Platform </title>
  <link rel="stylesheet" href="style.css">
  
  <!-- ููุชุจุงุช Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>

  <!-- ุดุงุดุฉ ุงูุชุฑุญูุจ -->
  <div id="welcome-modal" class="modal-overlay">
    <div class="modal-box">
      <h2>ูุฑุญุจุงู ุจู ูุง ุจุทู ๐ฉบ</h2>
      <p>ูู ูุถูู ุงุฏุฎู ุงุณูู ุงูุซูุงุซู ูุจู ุงูุจุฏุก</p>
      <input type="text" id="student-name-input" placeholder="ุงูุชุจ ุงุณูู ููุง..." />
      <button class="start-btn" onclick="saveStudentName()">ุฏุฎูู</button>
    </div>
  </div>

  <!-- ุดุงุดุฉ ุฏุฎูู ุงูุฃุฏูู -->
  <div id="admin-login-modal" class="modal-overlay" style="display: none;">
    <div class="modal-box">
      <h2>ุฏุฎูู ุงููุดุฑููู ๐</h2>
      <input type="password" id="admin-password-input" placeholder="ูููุฉ ุงููุฑูุฑ..." />
      <div class="modal-buttons">
          <button class="start-btn" onclick="checkAdminPassword()">ุฏุฎูู</button>
          <button class="back-btn" onclick="closeAdminLogin()">ุฅูุบุงุก</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="header">
      <div class="header-controls">
          <button id="theme-toggle" class="icon-btn" title="ุชุบููุฑ ุงููุถุน">๐</button>
          <button onclick="openDashboard()" class="icon-btn dashboard-icon" title="ุฅุญุตุงุฆูุงุชู">๐</button>
          <button onclick="openAdminLogin()" class="icon-btn admin-icon" title="ููุญุฉ ุงููุดุฑููู">๐จโ๐ผ</button>
      </div>
      
      <h1 id="site-title">ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช</h1>
      <p id="welcome-message">ุฃููุงู ุจู</p>
    </div>

    <!-- ุงูุชุจููุจุงุช -->
    <div id="main-nav" class="tab-container">
      <button class="tab-btn active" onclick="selectSubject('microbiology')">Microbiology</button>
      <button class="tab-btn" onclick="selectSubject('fundamental')">Fundamental</button>
      <button class="tab-btn" onclick="selectSubject('biochemistry')">Biochemistry</button>
      <button class="tab-btn" onclick="selectSubject('anatomy')">Anatomy</button>
      <button class="tab-btn" onclick="selectSubject('physiology')">Physiology</button>
      <button class="tab-btn" onclick="selectSubject('clinical')">Clinical</button>
      <button class="tab-btn" onclick="selectSubject('ethics')">Ethics</button>
    </div>
    
    <!-- ุงุฎุชูุงุฑ ุงููุตุฏุฑ -->
    <div id="source-selection" class="source-container">
        <div class="source-card" onclick="loadQuizSource('bank')">
            <h3>๐ ุจูู ุงูุฃุณุฆูุฉ</h3>
            <p>ุฃุณุฆูุฉ ุงูุจูู ุงูุดุงููุฉ ูููุงุฏุฉ</p>
        </div>
        <div class="source-card doctor-card" onclick="loadQuizSource('doctor')">
            <h3>๐จโโ๏ธ ูููุฒุงุช ุงูุฏูุชูุฑ</h3>
            <p>ุงูุฃุณุฆูุฉ ุงูุฎุงุตุฉ ุจูุญุงุถุฑุงุช ุงูุฏูุชูุฑ</p>
        </div>
    </div>

    <!-- ุนุฑุถ ุงููุฑูุช -->
    <div id="quiz-list-area" class="tab-content active" style="display:none;">
        <button class="back-btn" onclick="backToSources()">โ ุชุบููุฑ ุงููุตุฏุฑ</button>
        <div id="dynamic-cards-container" class="cards-grid"></div>
    </div>

    <!-- ููุญุฉ ุงูุทุงูุจ -->
    <div id="dashboard-view" class="dashboard-view" style="display:none;">
        <h2 class="quiz-title">ุฅุญุตุงุฆูุงุชู ุงูุดุฎุตูุฉ ๐</h2>
        <div class="stats-grid">
            <div class="stat-card"><div class="stat-icon">๐</div><div class="stat-info"><span id="total-quizzes-taken">0</span><p>ูููุฒุงุช</p></div></div>
            <div class="stat-card"><div class="stat-icon">๐ฏ</div><div class="stat-info"><span id="total-accuracy">0%</span><p>ุงูุฏูุฉ</p></div></div>
            <div class="stat-card"><div class="stat-icon">๐</div><div class="stat-info"><span id="total-attempts">0</span><p>ูุญุงููุงุช</p></div></div>
        </div>
        <div class="history-table-container">
            <table id="history-table">
                <thead><tr><th>ุงูุงูุชุญุงู</th><th>ุฃุนูู ุฏุฑุฌุฉ</th><th>ุขุฎุฑ ุฏุฑุฌุฉ</th><th>ุนุฏุฏ ุงููุญุงููุงุช</th></tr></thead>
                <tbody id="history-table-body"></tbody>
            </table>
        </div>
        <button class="start-btn go-back" onclick="closeDashboard()" style="margin-top:20px;">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</button>
    </div>

    <!-- ููุญุฉ ุงูุฃุฏูู (ุงููุนุฏูุฉ) -->
    <div id="admin-dashboard-view" class="dashboard-view" style="display:none;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 class="quiz-title" style="color:var(--secondary-color);">๐จโ๐ผ ููุญุฉ ุงููุดุฑู</h2>
            <button class="start-btn" onclick="closeAdminDashboard()" style="background:#ef4444; width:auto;">ุฎุฑูุฌ</button>
        </div>

        <!-- ุงูุฌุฒุก ุงูุฌุฏูุฏ: ุฅุถุงูุฉ ูููุฒ -->
        <div class="admin-add-section" style="background:var(--card-bg); padding:20px; border-radius:15px; border:2px dashed #ccc; margin-bottom:30px;">
            <h3 style="color:var(--primary-color); margin-top:0;">โ ุฅุถุงูุฉ ุงูุชุญุงู ุฌุฏูุฏ (ุณุฑูุน)</h3>
            
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:10px;">
                <div>
                    <label>ุงููุงุฏุฉ:</label>
                    <select id="admin-sub-select" class="admin-input">
                        <option value="microbiology">Microbiology</option>
                        <option value="fundamental">Fundamental</option>
                        <option value="biochemistry">Biochemistry</option>
                        <option value="anatomy">Anatomy</option>
                        <option value="physiology">Physiology</option>
                        <option value="clinical">Clinical</option>
                        <option value="ethics">Ethics</option>
                    </select>
                </div>
                <div>
                    <label>ุงููุตุฏุฑ:</label>
                    <select id="admin-src-select" class="admin-input">
                        <option value="bank">๐ ุจูู ุงูุฃุณุฆูุฉ</option>
                        <option value="doctor">๐จโโ๏ธ ูููุฒุงุช ุงูุฏูุชูุฑ</option>
                    </select>
                </div>
            </div>
            
            <input type="text" id="admin-quiz-title" class="admin-input" placeholder="ุนููุงู ุงูุงูุชุญุงู (ูุซุงู: ุดุงุจุชุฑ 1 ููุงุนุฉ)">
            
            <textarea id="admin-quiz-content" class="admin-input" style="height:150px;" placeholder="ุงูุณุฎ ุงูุฃุณุฆูุฉ ููุง...&#10;ูุซุงู:&#10;ุณ1: ุนุงุตูุฉ ูุตุฑุ&#10;ุฃ) ุงููุงูุฑุฉ&#10;ุจ) ุงูุงุณููุฏุฑูุฉ&#10;ุงูุฅุฌุงุจุฉ: ุฃ"></textarea>
            
            <button class="start-btn" onclick="addNewQuizFromAdmin()" style="background:#10b981;">ุญูุธ ุงูุงูุชุญุงู โ</button>
        </div>

        <h3 style="margin-top:20px;">ูุชุงุฆุฌ ุงูุทูุงุจ</h3>
        <div class="history-table-container">
            <table id="admin-table">
                <thead>
                    <tr><th>ุงุณู ุงูุทุงูุจ</th><th>ุงููููุฒ</th><th>ุงูุฏุฑุฌุฉ</th><th>ุงูุชุงุฑูุฎ</th></tr>
                </thead>
                <tbody id="admin-table-body">
                    <tr><td colspan="4" style="text-align:center;">ุฌุงุฑู ุงูุชุญููู...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ููุทูุฉ ุงูุงุฎุชุจุงุฑ -->
    <div id="quiz-container" class="quiz-container">
      <button class="back-btn go-back" onclick="backToQuizList()">โ ุฎุฑูุฌ</button>
      <div class="quiz-header">
        <h2 id="current-quiz-title" class="quiz-title"></h2>
        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
        <p id="question-counter"></p>
        <div id="quiz-timer">00:00</div>
      </div>
      <div id="question-container"></div>
      <div class="quiz-navigation">
        <button id="prev-btn" class="nav-btn" disabled>ุงูุณุงุจู</button>
        <button id="next-btn" class="nav-btn">ุงูุชุงูู</button>
      </div>
    </div>

    <!-- ุงููุชุงุฆุฌ -->
    <div id="results" class="quiz-container results">
      <h3>ุงูุชูู ุงูุงุฎุชุจุงุฑ!</h3>
      <div id="final-score" class="score"></div>
      <p id="score-message"></p>
      <p id="upload-status" style="font-size: 0.9rem; color: gray; margin-top:5px;"></p>
      <button id="review-btn" class="start-btn">ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช</button>
      <button class="start-btn go-back" onclick="backToQuizList()">ุงูุนูุฏุฉ ูููุงุฆูุฉ</button>
    </div>

    <!-- ุงููุฑุงุฌุนุฉ -->
    <div id="review-container" class="review-container">
      <h2 class="quiz-title">ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช</h2>
      <button class="back-btn" id="back-to-results">โ ุงูุนูุฏุฉ ูููุชุงุฆุฌ</button>
      <div id="review-content"></div>
      <button class="start-btn go-back" onclick="backToQuizList()">ุงูุนูุฏุฉ ูููุงุฆูุฉ</button>
    </div>

    <div class="footer">
      <p>Created by Zyad & Yusuf</p>
      <a href="https://zyadyasser2007.sarhne.com" target="_blank" class="sarhne-btn">ุตุงุฑุญูู ๐โค๏ธ</a>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>


